<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spotify OAuth 2.0 PKCE - Exemple P√©dagogique</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <!-- Avertissement p√©dagogique -->
        <div class="warning-banner">
            <h3>‚ö†Ô∏è PROJET P√âDAGOGIQUE UNIQUEMENT</h3>
            <p>Cet exemple est destin√© √† l'apprentissage d'OAuth 2.0 avec PKCE. <strong>Ne JAMAIS utiliser en production.</strong></p>
        </div>

        <!-- En-t√™te -->
        <header>
            <h1>üéµ Authentification Spotify avec OAuth 2.0 PKCE</h1>
            <p class="subtitle">Impl√©mentation vanilla JavaScript sans backend</p>
        </header>

        <!-- Section de configuration -->
        <section id="config-section" class="card">
            <h2>‚öôÔ∏è Configuration</h2>
            <p class="info-text">
                Avant de commencer, cr√©ez une application sur le
                <a href="https://developer.spotify.com/dashboard" target="_blank">Spotify Developer Dashboard</a>
            </p>

            <div class="form-group">
                <label for="client-id-input">Client ID Spotify :</label>
                <input
                    type="text"
                    id="client-id-input"
                    placeholder="Collez votre Client ID ici"
                    class="input-field"
                >
                <button id="save-client-id-btn" class="btn btn-primary">
                    Enregistrer le Client ID
                </button>
            </div>

            <div class="info-box">
                <strong>Important :</strong> Ajoutez cette URL dans les "Redirect URIs" de votre app Spotify :
                <code id="redirect-uri-display"></code>
            </div>
        </section>

        <!-- Section de connexion -->
        <section id="login-section" class="card hidden">
            <h2>üîê √âtape 1 : Authentification</h2>
            <p>Cliquez sur le bouton ci-dessous pour d√©marrer le flux OAuth 2.0 avec PKCE.</p>
            <button id="login-btn" class="btn btn-primary btn-large">
                Se connecter √† Spotify
            </button>

            <!-- Explication p√©dagogique du flux -->
            <div class="explanation-box">
                <h3>üìö Ce qui va se passer :</h3>
                <ol>
                    <li><strong>G√©n√©ration PKCE</strong> : cr√©ation d'un <code>code_verifier</code> al√©atoire et de son <code>code_challenge</code> (hash SHA-256)</li>
                    <li><strong>Redirection Spotify</strong> : vous serez redirig√© vers Spotify pour autoriser l'acc√®s</li>
                    <li><strong>Retour avec code</strong> : Spotify renvoie un code d'autorisation temporaire</li>
                    <li><strong>√âchange code/token</strong> : le code est √©chang√© contre un <code>access_token</code> via l'API Spotify</li>
                    <li><strong>Appel API</strong> : r√©cup√©ration des informations de votre profil</li>
                </ol>
            </div>
        </section>

        <!-- Section profil utilisateur -->
        <section id="profile-section" class="card hidden">
            <h2>‚úÖ Connect√© avec succ√®s !</h2>

            <div class="profile-card">
                <img id="profile-image" src="" alt="Photo de profil" class="profile-image">
                <div class="profile-info">
                    <h3 id="profile-name">Nom</h3>
                    <p id="profile-email" class="profile-email">email@example.com</p>
                    <p class="profile-detail">ID : <span id="profile-id"></span></p>
                    <p class="profile-detail">Pays : <span id="profile-country"></span></p>
                    <p class="profile-detail">Type de compte : <span id="profile-product"></span></p>
                </div>
            </div>

            <button id="logout-btn" class="btn btn-secondary">
                Se d√©connecter
            </button>
        </section>

        <!-- Section √©coute en cours -->
        <section id="currently-playing-section" class="card hidden">
            <h2>üéß √âcoute en cours</h2>
            <div id="currently-playing-content">
                <p class="loading-text">Chargement...</p>
            </div>
        </section>

        <!-- Section top albums -->
        <section id="top-albums-section" class="card hidden">
            <h2>‚≠ê Albums les plus √©cout√©s</h2>
            <div id="top-albums-content">
                <p class="loading-text">Chargement...</p>
            </div>
        </section>

        <!-- Section logs p√©dagogiques -->
        <section id="logs-section" class="card">
            <h2>üìã Logs techniques (√† des fins p√©dagogiques)</h2>
            <div id="logs-container" class="logs-container">
                <p class="log-empty">Les √©tapes du processus d'authentification s'afficheront ici...</p>
            </div>
        </section>

        <!-- Section informations token -->
        <section id="token-section" class="card hidden">
            <h2>üîë Informations sur le token</h2>
            <div class="token-info">
                <p><strong>Access Token (10 premiers caract√®res) :</strong> <code id="token-preview">...</code></p>
                <p><strong>Type :</strong> <code id="token-type">Bearer</code></p>
                <p><strong>Expire dans :</strong> <code id="token-expiry">3600</code> secondes</p>
                <p><strong>Scopes :</strong> <code id="token-scopes">...</code></p>
            </div>
        </section>

        <!-- Footer p√©dagogique -->
        <footer>
            <p>
                ‚ö†Ô∏è Ceci est un exemple <strong>p√©dagogique</strong> pour comprendre OAuth 2.0 PKCE.
            </p>
            <p>
                En production, utilisez un backend s√©curis√© pour g√©rer les tokens.
            </p>
        </footer>
    </div>

    <script src="script.js"></script>
</body>
</html>
